{"ast":null,"code":"/**\n * Service pour récupérer et afficher le compteur social proof\n */\n\n// Utiliser l'URL de l'API depuis les variables d'environnement ou l'URL actuelle\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\n\n/**\n * Récupère les statistiques du compteur depuis l'API\n */\nasync function getStats() {\n  try {\n    // Utiliser l'URL complète ou relative selon l'environnement\n    const apiUrl = API_BASE_URL || '';\n    const response = await fetch(`${apiUrl}/api/stats`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      cache: 'no-cache' // Forcer la récupération des données à jour\n    });\n    if (!response.ok) {\n      throw new Error(`Erreur HTTP ${response.status}`);\n    }\n    const data = await response.json();\n    console.log('[COUNTER] Stats reçues:', data);\n    if (data.counter) {\n      return {\n        total: data.counter.total || 0,\n        today: data.counter.today || 0,\n        formatted: data.counter.formatted || {\n          total: formatNumber(data.counter.total || 0),\n          today: (data.counter.today || 0).toString()\n        }\n      };\n    }\n    return {\n      total: 0,\n      today: 0,\n      formatted: {\n        total: '0',\n        today: '0'\n      }\n    };\n  } catch (error) {\n    console.error('[COUNTER] Erreur lors de la récupération des stats:', error);\n    // Retourner des valeurs par défaut en cas d'erreur\n    return {\n      total: 0,\n      today: 0,\n      formatted: {\n        total: '0',\n        today: '0'\n      }\n    };\n  }\n}\n\n/**\n * Formate un nombre pour l'affichage (ex: 1234 -> \"1.2k\")\n */\nfunction formatNumber(num) {\n  if (num < 1000) return num.toString();\n  if (num < 1000000) return (num / 1000).toFixed(1) + 'k';\n  return (num / 1000000).toFixed(1) + 'M';\n}\nconst counterService = {\n  getStats,\n  formatNumber\n};\nexport default counterService;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","getStats","apiUrl","response","fetch","method","headers","cache","ok","Error","status","data","json","console","log","counter","total","today","formatted","formatNumber","toString","error","num","toFixed","counterService"],"sources":["/Users/ares/DEV/Visibility strategy score/frontend/src/services/counter.js"],"sourcesContent":["/**\n * Service pour récupérer et afficher le compteur social proof\n */\n\n// Utiliser l'URL de l'API depuis les variables d'environnement ou l'URL actuelle\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\n\n/**\n * Récupère les statistiques du compteur depuis l'API\n */\nasync function getStats() {\n  try {\n    // Utiliser l'URL complète ou relative selon l'environnement\n    const apiUrl = API_BASE_URL || '';\n    const response = await fetch(`${apiUrl}/api/stats`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      cache: 'no-cache' // Forcer la récupération des données à jour\n    });\n    \n    if (!response.ok) {\n      throw new Error(`Erreur HTTP ${response.status}`);\n    }\n    \n    const data = await response.json();\n    console.log('[COUNTER] Stats reçues:', data);\n    \n    if (data.counter) {\n      return {\n        total: data.counter.total || 0,\n        today: data.counter.today || 0,\n        formatted: data.counter.formatted || {\n          total: formatNumber(data.counter.total || 0),\n          today: (data.counter.today || 0).toString()\n        }\n      };\n    }\n    \n    return { total: 0, today: 0, formatted: { total: '0', today: '0' } };\n  } catch (error) {\n    console.error('[COUNTER] Erreur lors de la récupération des stats:', error);\n    // Retourner des valeurs par défaut en cas d'erreur\n    return { total: 0, today: 0, formatted: { total: '0', today: '0' } };\n  }\n}\n\n/**\n * Formate un nombre pour l'affichage (ex: 1234 -> \"1.2k\")\n */\nfunction formatNumber(num) {\n  if (num < 1000) return num.toString();\n  if (num < 1000000) return (num / 1000).toFixed(1) + 'k';\n  return (num / 1000000).toFixed(1) + 'M';\n}\n\nconst counterService = {\n  getStats,\n  formatNumber\n};\n\nexport default counterService;\n\n"],"mappings":"AAAA;AACA;AACA;;AAEA;AACA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,EAAE;;AAExD;AACA;AACA;AACA,eAAeC,QAAQA,CAAA,EAAG;EACxB,IAAI;IACF;IACA,MAAMC,MAAM,GAAGL,YAAY,IAAI,EAAE;IACjC,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGF,MAAM,YAAY,EAAE;MAClDG,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,KAAK,EAAE,UAAU,CAAC;IACpB,CAAC,CAAC;IAEF,IAAI,CAACJ,QAAQ,CAACK,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,eAAeN,QAAQ,CAACO,MAAM,EAAE,CAAC;IACnD;IAEA,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;IAClCC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEH,IAAI,CAAC;IAE5C,IAAIA,IAAI,CAACI,OAAO,EAAE;MAChB,OAAO;QACLC,KAAK,EAAEL,IAAI,CAACI,OAAO,CAACC,KAAK,IAAI,CAAC;QAC9BC,KAAK,EAAEN,IAAI,CAACI,OAAO,CAACE,KAAK,IAAI,CAAC;QAC9BC,SAAS,EAAEP,IAAI,CAACI,OAAO,CAACG,SAAS,IAAI;UACnCF,KAAK,EAAEG,YAAY,CAACR,IAAI,CAACI,OAAO,CAACC,KAAK,IAAI,CAAC,CAAC;UAC5CC,KAAK,EAAE,CAACN,IAAI,CAACI,OAAO,CAACE,KAAK,IAAI,CAAC,EAAEG,QAAQ,CAAC;QAC5C;MACF,CAAC;IACH;IAEA,OAAO;MAAEJ,KAAK,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAEC,SAAS,EAAE;QAAEF,KAAK,EAAE,GAAG;QAAEC,KAAK,EAAE;MAAI;IAAE,CAAC;EACtE,CAAC,CAAC,OAAOI,KAAK,EAAE;IACdR,OAAO,CAACQ,KAAK,CAAC,qDAAqD,EAAEA,KAAK,CAAC;IAC3E;IACA,OAAO;MAAEL,KAAK,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAEC,SAAS,EAAE;QAAEF,KAAK,EAAE,GAAG;QAAEC,KAAK,EAAE;MAAI;IAAE,CAAC;EACtE;AACF;;AAEA;AACA;AACA;AACA,SAASE,YAAYA,CAACG,GAAG,EAAE;EACzB,IAAIA,GAAG,GAAG,IAAI,EAAE,OAAOA,GAAG,CAACF,QAAQ,CAAC,CAAC;EACrC,IAAIE,GAAG,GAAG,OAAO,EAAE,OAAO,CAACA,GAAG,GAAG,IAAI,EAAEC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG;EACvD,OAAO,CAACD,GAAG,GAAG,OAAO,EAAEC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG;AACzC;AAEA,MAAMC,cAAc,GAAG;EACrBvB,QAAQ;EACRkB;AACF,CAAC;AAED,eAAeK,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}