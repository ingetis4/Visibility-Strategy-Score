{"ast":null,"code":"/**\n * Service d'analytics frontend\n * Compatible avec Google Analytics 4 et Plausible\n */// Configuration (peut être passée via .env)\nconst GA_MEASUREMENT_ID=process.env.REACT_APP_GA_MEASUREMENT_ID||'';const PLAUSIBLE_DOMAIN=process.env.REACT_APP_PLAUSIBLE_DOMAIN||'';/**\n * Initialise Google Analytics si configuré\n */function initGoogleAnalytics(){if(!GA_MEASUREMENT_ID)return;// Script Google Analytics\nconst script1=document.createElement('script');script1.async=true;script1.src=\"https://www.googletagmanager.com/gtag/js?id=\".concat(GA_MEASUREMENT_ID);document.head.appendChild(script1);window.dataLayer=window.dataLayer||[];function gtag(){window.dataLayer.push(arguments);}window.gtag=gtag;gtag('js',new Date());gtag('config',GA_MEASUREMENT_ID,{page_path:window.location.pathname});console.log('[ANALYTICS] Google Analytics initialisé');}/**\n * Initialise Plausible si configuré\n */function initPlausible(){if(!PLAUSIBLE_DOMAIN)return;const script=document.createElement('script');script.defer=true;script.dataset.domain=PLAUSIBLE_DOMAIN;script.src='https://plausible.io/js/script.js';document.head.appendChild(script);console.log('[ANALYTICS] Plausible initialisé');}/**\n * Track un événement personnalisé\n */function trackEvent(eventName){let eventData=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};// Google Analytics 4\nif(window.gtag&&GA_MEASUREMENT_ID){window.gtag('event',eventName,eventData);}// Plausible\nif(window.plausible&&PLAUSIBLE_DOMAIN){window.plausible(eventName,{props:eventData});}// Log pour debugging\nconsole.log(\"[ANALYTICS] Event: \".concat(eventName),eventData);}/**\n * Track une page view\n */function trackPageView(path){// Google Analytics\nif(window.gtag&&GA_MEASUREMENT_ID){window.gtag('config',GA_MEASUREMENT_ID,{page_path:path});}// Plausible track automatiquement les page views\nconsole.log(\"[ANALYTICS] Page view: \".concat(path));}/**\n * Track le début d'une analyse\n */function trackAnalysisStarted(url,analysisType){trackEvent('analysis_started',{url:url,analysis_type:analysisType});}/**\n * Track la complétion d'une analyse\n */function trackAnalysisCompleted(url,analysisType,seoScore,iaScore){trackEvent('analysis_completed',{url:url,analysis_type:analysisType,seo_score:seoScore,ia_score:iaScore});}/**\n * Track l'ouverture de Calendly\n */function trackCalendlyOpened(){trackEvent('calendly_opened');}/**\n * Track la confirmation d'un rendez-vous\n */function trackAppointmentConfirmed(){trackEvent('appointment_confirmed');}// Initialiser au chargement\nif(typeof window!=='undefined'){initGoogleAnalytics();initPlausible();}const analyticsService={trackEvent,trackPageView,trackAnalysisStarted,trackAnalysisCompleted,trackCalendlyOpened,trackAppointmentConfirmed};export default analyticsService;","map":{"version":3,"names":["GA_MEASUREMENT_ID","process","env","REACT_APP_GA_MEASUREMENT_ID","PLAUSIBLE_DOMAIN","REACT_APP_PLAUSIBLE_DOMAIN","initGoogleAnalytics","script1","document","createElement","async","src","concat","head","appendChild","window","dataLayer","gtag","push","arguments","Date","page_path","location","pathname","console","log","initPlausible","script","defer","dataset","domain","trackEvent","eventName","eventData","length","undefined","plausible","props","trackPageView","path","trackAnalysisStarted","url","analysisType","analysis_type","trackAnalysisCompleted","seoScore","iaScore","seo_score","ia_score","trackCalendlyOpened","trackAppointmentConfirmed","analyticsService"],"sources":["/Users/ares/DEV/Visibility strategy score/frontend/src/services/analytics.js"],"sourcesContent":["/**\n * Service d'analytics frontend\n * Compatible avec Google Analytics 4 et Plausible\n */\n\n// Configuration (peut être passée via .env)\nconst GA_MEASUREMENT_ID = process.env.REACT_APP_GA_MEASUREMENT_ID || '';\nconst PLAUSIBLE_DOMAIN = process.env.REACT_APP_PLAUSIBLE_DOMAIN || '';\n\n/**\n * Initialise Google Analytics si configuré\n */\nfunction initGoogleAnalytics() {\n  if (!GA_MEASUREMENT_ID) return;\n  \n  // Script Google Analytics\n  const script1 = document.createElement('script');\n  script1.async = true;\n  script1.src = `https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`;\n  document.head.appendChild(script1);\n  \n  window.dataLayer = window.dataLayer || [];\n  function gtag() {\n    window.dataLayer.push(arguments);\n  }\n  window.gtag = gtag;\n  gtag('js', new Date());\n  gtag('config', GA_MEASUREMENT_ID, {\n    page_path: window.location.pathname,\n  });\n  \n  console.log('[ANALYTICS] Google Analytics initialisé');\n}\n\n/**\n * Initialise Plausible si configuré\n */\nfunction initPlausible() {\n  if (!PLAUSIBLE_DOMAIN) return;\n  \n  const script = document.createElement('script');\n  script.defer = true;\n  script.dataset.domain = PLAUSIBLE_DOMAIN;\n  script.src = 'https://plausible.io/js/script.js';\n  document.head.appendChild(script);\n  \n  console.log('[ANALYTICS] Plausible initialisé');\n}\n\n/**\n * Track un événement personnalisé\n */\nfunction trackEvent(eventName, eventData = {}) {\n  // Google Analytics 4\n  if (window.gtag && GA_MEASUREMENT_ID) {\n    window.gtag('event', eventName, eventData);\n  }\n  \n  // Plausible\n  if (window.plausible && PLAUSIBLE_DOMAIN) {\n    window.plausible(eventName, { props: eventData });\n  }\n  \n  // Log pour debugging\n  console.log(`[ANALYTICS] Event: ${eventName}`, eventData);\n}\n\n/**\n * Track une page view\n */\nfunction trackPageView(path) {\n  // Google Analytics\n  if (window.gtag && GA_MEASUREMENT_ID) {\n    window.gtag('config', GA_MEASUREMENT_ID, {\n      page_path: path,\n    });\n  }\n  \n  // Plausible track automatiquement les page views\n  console.log(`[ANALYTICS] Page view: ${path}`);\n}\n\n/**\n * Track le début d'une analyse\n */\nfunction trackAnalysisStarted(url, analysisType) {\n  trackEvent('analysis_started', {\n    url: url,\n    analysis_type: analysisType\n  });\n}\n\n/**\n * Track la complétion d'une analyse\n */\nfunction trackAnalysisCompleted(url, analysisType, seoScore, iaScore) {\n  trackEvent('analysis_completed', {\n    url: url,\n    analysis_type: analysisType,\n    seo_score: seoScore,\n    ia_score: iaScore\n  });\n}\n\n/**\n * Track l'ouverture de Calendly\n */\nfunction trackCalendlyOpened() {\n  trackEvent('calendly_opened');\n}\n\n/**\n * Track la confirmation d'un rendez-vous\n */\nfunction trackAppointmentConfirmed() {\n  trackEvent('appointment_confirmed');\n}\n\n// Initialiser au chargement\nif (typeof window !== 'undefined') {\n  initGoogleAnalytics();\n  initPlausible();\n}\n\nconst analyticsService = {\n  trackEvent,\n  trackPageView,\n  trackAnalysisStarted,\n  trackAnalysisCompleted,\n  trackCalendlyOpened,\n  trackAppointmentConfirmed\n};\n\nexport default analyticsService;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}