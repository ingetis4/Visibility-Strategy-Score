{"ast":null,"code":"/**\n * Service d'analytics frontend\n * Compatible avec Google Analytics 4 et Plausible\n */\n\n// Configuration (peut être passée via .env)\nconst GA_MEASUREMENT_ID = process.env.REACT_APP_GA_MEASUREMENT_ID || '';\nconst PLAUSIBLE_DOMAIN = process.env.REACT_APP_PLAUSIBLE_DOMAIN || '';\n\n/**\n * Initialise Google Analytics si configuré\n */\nfunction initGoogleAnalytics() {\n  if (!GA_MEASUREMENT_ID) return;\n\n  // Script Google Analytics\n  const script1 = document.createElement('script');\n  script1.async = true;\n  script1.src = `https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`;\n  document.head.appendChild(script1);\n  window.dataLayer = window.dataLayer || [];\n  function gtag() {\n    window.dataLayer.push(arguments);\n  }\n  window.gtag = gtag;\n  gtag('js', new Date());\n  gtag('config', GA_MEASUREMENT_ID, {\n    page_path: window.location.pathname\n  });\n  console.log('[ANALYTICS] Google Analytics initialisé');\n}\n\n/**\n * Initialise Plausible si configuré\n */\nfunction initPlausible() {\n  if (!PLAUSIBLE_DOMAIN) return;\n  const script = document.createElement('script');\n  script.defer = true;\n  script.dataset.domain = PLAUSIBLE_DOMAIN;\n  script.src = 'https://plausible.io/js/script.js';\n  document.head.appendChild(script);\n  console.log('[ANALYTICS] Plausible initialisé');\n}\n\n/**\n * Track un événement personnalisé\n */\nfunction trackEvent(eventName, eventData = {}) {\n  // Google Analytics 4\n  if (window.gtag && GA_MEASUREMENT_ID) {\n    window.gtag('event', eventName, eventData);\n  }\n\n  // Plausible\n  if (window.plausible && PLAUSIBLE_DOMAIN) {\n    window.plausible(eventName, {\n      props: eventData\n    });\n  }\n\n  // Log pour debugging\n  console.log(`[ANALYTICS] Event: ${eventName}`, eventData);\n}\n\n/**\n * Track une page view\n */\nfunction trackPageView(path) {\n  // Google Analytics\n  if (window.gtag && GA_MEASUREMENT_ID) {\n    window.gtag('config', GA_MEASUREMENT_ID, {\n      page_path: path\n    });\n  }\n\n  // Plausible track automatiquement les page views\n  console.log(`[ANALYTICS] Page view: ${path}`);\n}\n\n/**\n * Track le début d'une analyse\n */\nfunction trackAnalysisStarted(url, analysisType) {\n  trackEvent('analysis_started', {\n    url: url,\n    analysis_type: analysisType\n  });\n}\n\n/**\n * Track la complétion d'une analyse\n */\nfunction trackAnalysisCompleted(url, analysisType, seoScore, iaScore) {\n  trackEvent('analysis_completed', {\n    url: url,\n    analysis_type: analysisType,\n    seo_score: seoScore,\n    ia_score: iaScore\n  });\n}\n\n/**\n * Track l'ouverture de Calendly\n */\nfunction trackCalendlyOpened() {\n  trackEvent('calendly_opened');\n}\n\n/**\n * Track la confirmation d'un rendez-vous\n */\nfunction trackAppointmentConfirmed() {\n  trackEvent('appointment_confirmed');\n}\n\n// Initialiser au chargement\nif (typeof window !== 'undefined') {\n  initGoogleAnalytics();\n  initPlausible();\n}\nconst analyticsService = {\n  trackEvent,\n  trackPageView,\n  trackAnalysisStarted,\n  trackAnalysisCompleted,\n  trackCalendlyOpened,\n  trackAppointmentConfirmed\n};\nexport default analyticsService;","map":{"version":3,"names":["GA_MEASUREMENT_ID","process","env","REACT_APP_GA_MEASUREMENT_ID","PLAUSIBLE_DOMAIN","REACT_APP_PLAUSIBLE_DOMAIN","initGoogleAnalytics","script1","document","createElement","async","src","head","appendChild","window","dataLayer","gtag","push","arguments","Date","page_path","location","pathname","console","log","initPlausible","script","defer","dataset","domain","trackEvent","eventName","eventData","plausible","props","trackPageView","path","trackAnalysisStarted","url","analysisType","analysis_type","trackAnalysisCompleted","seoScore","iaScore","seo_score","ia_score","trackCalendlyOpened","trackAppointmentConfirmed","analyticsService"],"sources":["/Users/ares/DEV/Visibility strategy score/frontend/src/services/analytics.js"],"sourcesContent":["/**\n * Service d'analytics frontend\n * Compatible avec Google Analytics 4 et Plausible\n */\n\n// Configuration (peut être passée via .env)\nconst GA_MEASUREMENT_ID = process.env.REACT_APP_GA_MEASUREMENT_ID || '';\nconst PLAUSIBLE_DOMAIN = process.env.REACT_APP_PLAUSIBLE_DOMAIN || '';\n\n/**\n * Initialise Google Analytics si configuré\n */\nfunction initGoogleAnalytics() {\n  if (!GA_MEASUREMENT_ID) return;\n  \n  // Script Google Analytics\n  const script1 = document.createElement('script');\n  script1.async = true;\n  script1.src = `https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`;\n  document.head.appendChild(script1);\n  \n  window.dataLayer = window.dataLayer || [];\n  function gtag() {\n    window.dataLayer.push(arguments);\n  }\n  window.gtag = gtag;\n  gtag('js', new Date());\n  gtag('config', GA_MEASUREMENT_ID, {\n    page_path: window.location.pathname,\n  });\n  \n  console.log('[ANALYTICS] Google Analytics initialisé');\n}\n\n/**\n * Initialise Plausible si configuré\n */\nfunction initPlausible() {\n  if (!PLAUSIBLE_DOMAIN) return;\n  \n  const script = document.createElement('script');\n  script.defer = true;\n  script.dataset.domain = PLAUSIBLE_DOMAIN;\n  script.src = 'https://plausible.io/js/script.js';\n  document.head.appendChild(script);\n  \n  console.log('[ANALYTICS] Plausible initialisé');\n}\n\n/**\n * Track un événement personnalisé\n */\nfunction trackEvent(eventName, eventData = {}) {\n  // Google Analytics 4\n  if (window.gtag && GA_MEASUREMENT_ID) {\n    window.gtag('event', eventName, eventData);\n  }\n  \n  // Plausible\n  if (window.plausible && PLAUSIBLE_DOMAIN) {\n    window.plausible(eventName, { props: eventData });\n  }\n  \n  // Log pour debugging\n  console.log(`[ANALYTICS] Event: ${eventName}`, eventData);\n}\n\n/**\n * Track une page view\n */\nfunction trackPageView(path) {\n  // Google Analytics\n  if (window.gtag && GA_MEASUREMENT_ID) {\n    window.gtag('config', GA_MEASUREMENT_ID, {\n      page_path: path,\n    });\n  }\n  \n  // Plausible track automatiquement les page views\n  console.log(`[ANALYTICS] Page view: ${path}`);\n}\n\n/**\n * Track le début d'une analyse\n */\nfunction trackAnalysisStarted(url, analysisType) {\n  trackEvent('analysis_started', {\n    url: url,\n    analysis_type: analysisType\n  });\n}\n\n/**\n * Track la complétion d'une analyse\n */\nfunction trackAnalysisCompleted(url, analysisType, seoScore, iaScore) {\n  trackEvent('analysis_completed', {\n    url: url,\n    analysis_type: analysisType,\n    seo_score: seoScore,\n    ia_score: iaScore\n  });\n}\n\n/**\n * Track l'ouverture de Calendly\n */\nfunction trackCalendlyOpened() {\n  trackEvent('calendly_opened');\n}\n\n/**\n * Track la confirmation d'un rendez-vous\n */\nfunction trackAppointmentConfirmed() {\n  trackEvent('appointment_confirmed');\n}\n\n// Initialiser au chargement\nif (typeof window !== 'undefined') {\n  initGoogleAnalytics();\n  initPlausible();\n}\n\nconst analyticsService = {\n  trackEvent,\n  trackPageView,\n  trackAnalysisStarted,\n  trackAnalysisCompleted,\n  trackCalendlyOpened,\n  trackAppointmentConfirmed\n};\n\nexport default analyticsService;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}