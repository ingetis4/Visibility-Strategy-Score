{"ast":null,"code":"/**\n * Normalise une URL pour ne garder que le domaine de base (protocole + hostname)\n * Exemples:\n * - https://example.com/page/subpage → https://example.com\n * - https://www.example.fr/article → https://www.example.fr\n * - https://example.co.uk/blog → https://example.co.uk\n * - example.com → https://example.com (ajoute https:// si manquant)\n * \n * @param {string} urlString - L'URL à normaliser\n * @returns {string} - L'URL normalisée (protocole + hostname uniquement)\n */\nexport function normalizeUrl(urlString) {\n  if (!urlString || typeof urlString !== 'string') {\n    return '';\n  }\n\n  // Nettoyer l'URL (enlever les espaces)\n  const cleaned = urlString.trim();\n\n  // Si l'URL est vide, retourner vide\n  if (!cleaned) {\n    return '';\n  }\n  try {\n    // Ajouter le protocole si manquant (https:// par défaut)\n    let urlToParse = cleaned;\n    if (!cleaned.startsWith('http://') && !cleaned.startsWith('https://')) {\n      urlToParse = 'https://' + cleaned;\n    }\n\n    // Parser l'URL\n    const url = new URL(urlToParse);\n\n    // Retourner uniquement le protocole + hostname\n    return `${url.protocol}//${url.hostname}`;\n  } catch (error) {\n    // Si l'URL est invalide, essayer d'ajouter https:// et réessayer\n    try {\n      const urlWithProtocol = cleaned.startsWith('http://') || cleaned.startsWith('https://') ? cleaned : 'https://' + cleaned;\n      const url = new URL(urlWithProtocol);\n      return `${url.protocol}//${url.hostname}`;\n    } catch (secondError) {\n      // Si ça échoue encore, retourner l'original avec https:// ajouté (sera validé côté backend)\n      console.warn('Erreur lors de la normalisation de l\\'URL:', error);\n      return cleaned.startsWith('http://') || cleaned.startsWith('https://') ? cleaned : 'https://' + cleaned;\n    }\n  }\n}\n\n/**\n * Normalise l'URL et met à jour le champ du formulaire\n * Utile pour être utilisé dans un onChange ou onBlur\n * \n * @param {Event} e - L'événement du champ input\n * @param {Function} setFormData - La fonction pour mettre à jour le state du formulaire\n * @param {Object} formData - L'objet formData actuel\n */\nexport function handleUrlNormalize(e, setFormData, formData) {\n  const normalized = normalizeUrl(e.target.value);\n  setFormData({\n    ...formData,\n    url: normalized\n  });\n}","map":{"version":3,"names":["normalizeUrl","urlString","cleaned","trim","urlToParse","startsWith","url","URL","protocol","hostname","error","urlWithProtocol","secondError","console","warn","handleUrlNormalize","e","setFormData","formData","normalized","target","value"],"sources":["/Users/ares/DEV/Visibility strategy score/frontend/src/utils/urlNormalizer.js"],"sourcesContent":["/**\n * Normalise une URL pour ne garder que le domaine de base (protocole + hostname)\n * Exemples:\n * - https://example.com/page/subpage → https://example.com\n * - https://www.example.fr/article → https://www.example.fr\n * - https://example.co.uk/blog → https://example.co.uk\n * - example.com → https://example.com (ajoute https:// si manquant)\n * \n * @param {string} urlString - L'URL à normaliser\n * @returns {string} - L'URL normalisée (protocole + hostname uniquement)\n */\nexport function normalizeUrl(urlString) {\n  if (!urlString || typeof urlString !== 'string') {\n    return '';\n  }\n\n  // Nettoyer l'URL (enlever les espaces)\n  const cleaned = urlString.trim();\n\n  // Si l'URL est vide, retourner vide\n  if (!cleaned) {\n    return '';\n  }\n\n  try {\n    // Ajouter le protocole si manquant (https:// par défaut)\n    let urlToParse = cleaned;\n    if (!cleaned.startsWith('http://') && !cleaned.startsWith('https://')) {\n      urlToParse = 'https://' + cleaned;\n    }\n\n    // Parser l'URL\n    const url = new URL(urlToParse);\n\n    // Retourner uniquement le protocole + hostname\n    return `${url.protocol}//${url.hostname}`;\n  } catch (error) {\n    // Si l'URL est invalide, essayer d'ajouter https:// et réessayer\n    try {\n      const urlWithProtocol = cleaned.startsWith('http://') || cleaned.startsWith('https://') \n        ? cleaned \n        : 'https://' + cleaned;\n      const url = new URL(urlWithProtocol);\n      return `${url.protocol}//${url.hostname}`;\n    } catch (secondError) {\n      // Si ça échoue encore, retourner l'original avec https:// ajouté (sera validé côté backend)\n      console.warn('Erreur lors de la normalisation de l\\'URL:', error);\n      return cleaned.startsWith('http://') || cleaned.startsWith('https://') \n        ? cleaned \n        : 'https://' + cleaned;\n    }\n  }\n}\n\n/**\n * Normalise l'URL et met à jour le champ du formulaire\n * Utile pour être utilisé dans un onChange ou onBlur\n * \n * @param {Event} e - L'événement du champ input\n * @param {Function} setFormData - La fonction pour mettre à jour le state du formulaire\n * @param {Object} formData - L'objet formData actuel\n */\nexport function handleUrlNormalize(e, setFormData, formData) {\n  const normalized = normalizeUrl(e.target.value);\n  setFormData({\n    ...formData,\n    url: normalized\n  });\n}\n\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,YAAYA,CAACC,SAAS,EAAE;EACtC,IAAI,CAACA,SAAS,IAAI,OAAOA,SAAS,KAAK,QAAQ,EAAE;IAC/C,OAAO,EAAE;EACX;;EAEA;EACA,MAAMC,OAAO,GAAGD,SAAS,CAACE,IAAI,CAAC,CAAC;;EAEhC;EACA,IAAI,CAACD,OAAO,EAAE;IACZ,OAAO,EAAE;EACX;EAEA,IAAI;IACF;IACA,IAAIE,UAAU,GAAGF,OAAO;IACxB,IAAI,CAACA,OAAO,CAACG,UAAU,CAAC,SAAS,CAAC,IAAI,CAACH,OAAO,CAACG,UAAU,CAAC,UAAU,CAAC,EAAE;MACrED,UAAU,GAAG,UAAU,GAAGF,OAAO;IACnC;;IAEA;IACA,MAAMI,GAAG,GAAG,IAAIC,GAAG,CAACH,UAAU,CAAC;;IAE/B;IACA,OAAO,GAAGE,GAAG,CAACE,QAAQ,KAAKF,GAAG,CAACG,QAAQ,EAAE;EAC3C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd;IACA,IAAI;MACF,MAAMC,eAAe,GAAGT,OAAO,CAACG,UAAU,CAAC,SAAS,CAAC,IAAIH,OAAO,CAACG,UAAU,CAAC,UAAU,CAAC,GACnFH,OAAO,GACP,UAAU,GAAGA,OAAO;MACxB,MAAMI,GAAG,GAAG,IAAIC,GAAG,CAACI,eAAe,CAAC;MACpC,OAAO,GAAGL,GAAG,CAACE,QAAQ,KAAKF,GAAG,CAACG,QAAQ,EAAE;IAC3C,CAAC,CAAC,OAAOG,WAAW,EAAE;MACpB;MACAC,OAAO,CAACC,IAAI,CAAC,4CAA4C,EAAEJ,KAAK,CAAC;MACjE,OAAOR,OAAO,CAACG,UAAU,CAAC,SAAS,CAAC,IAAIH,OAAO,CAACG,UAAU,CAAC,UAAU,CAAC,GAClEH,OAAO,GACP,UAAU,GAAGA,OAAO;IAC1B;EACF;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASa,kBAAkBA,CAACC,CAAC,EAAEC,WAAW,EAAEC,QAAQ,EAAE;EAC3D,MAAMC,UAAU,GAAGnB,YAAY,CAACgB,CAAC,CAACI,MAAM,CAACC,KAAK,CAAC;EAC/CJ,WAAW,CAAC;IACV,GAAGC,QAAQ;IACXZ,GAAG,EAAEa;EACP,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}